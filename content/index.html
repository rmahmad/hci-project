<html>
    <head>
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
        <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" title="no title" charset="utf-8">
        <script src="https://code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
        <script src="https://cdn.socket.io/socket.io-1.2.0.js"></script>
        <script type="text/javascript">
        var socket = io();
        socket.on('chat message', function(msg) {
            $('#messages').append($('<li>').text(msg));
            $("#messages").scrollTop($("#messages")[0].scrollHeight);
        });
        socket.on('connected', function(msg) {
            $('#messages').append($('<li class="system-message">').text(msg));
        });
        socket.on('disconnected', function(msg) {
            $('#messages').append($('<li class="system-message">').text(msg));
        })

        $(document).ready(function() {
            $('#chat-form').keyup(function() {
                if($('#chat-message-box').val() != '') {
                    $('#chat-send-button').removeAttr('disabled');
                }
                else {
                    $('#chat-send-button').attr('disabled', 'disabled');
                }
            });

            $('#skip-button').click(function() {
                video = document.getElementById("movie");
                console.log(movie.currentTime);
                movie.currentTime += 10;
            });

            $('form').submit(function(){
                socket.emit('chat message', $('#chat-message-box').val());
                $('#chat-message-box').val('');
                $('#chat-send-button').attr('disabled', 'disabled');
                return false;
            });
        });
        </script>
    </head>
    <body class="row">
        <div id="movie-area" class="col-md-8">
            <video id="movie" controls>
                <source src="assets/movie.mp4" type="video/mp4">
            </video>
            <button id='skip-button' type='button'>Skip 10 seconds</button>
        </div>
        <div id="chat-area" class="col-md-4">
            <ul id="messages"></ul>
            <form id="chat-form" action="">
                <input id="chat-message-box" autocomplete="off" />
                <button id="chat-send-button" class="btn btn-primary" disabled="disabled">
                    Send
                </button>
            </form>
        </div>
    </body>
</html>
